<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Schakeling</title>
    <link type="text/css" rel="stylesheet" href="style.css">
  </head>
  <body>
    <script type="text/javascript">// Generated by CoffeeScript 1.9.3
(function() {
  var AND, BitHolder, Button, Component, LED, Lamp, MemoryCell, MemoryCell_4bit, NAND, NOR, NOT, OR, Pressable, PulseCounter, PulseGenerator, Switch, Time, XOR, components, debug, debugging, generateLogicCircuit, imports, init, log, main, press, release, run, simulate, start, stateof, undebug, unwatch, watch, watching,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty,
    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
    slice = [].slice;

  components = [];

  Component = (function() {
    function Component(name1) {
      this.name = name1 != null ? name1 : null;
      components.push(this);
    }

    Component.prototype.setState = function() {
      return false;
    };

    Component.prototype.getState = function() {
      return false;
    };

    Component.prototype.setName = function(name) {
      this.name = name;
      return this;
    };

    Component.prototype.getName = function() {
      return this.name;
    };

    Component.prototype.simulate = function() {};

    Component.prototype.copy = function(name) {
      var copy;
      copy = new Component(this.name);
      if (copy.name == null) {
        copy.name = name;
      }
      if (copy.title == null) {
        copy.title = this.title;
      }
      copy.getState = this.getState;
      copy.setState = this.setState;
      copy.getName = function() {
        return this.name;
      };
      copy.setName = function() {
        return false;
      };
      copy.getTitle = function() {
        return this.title;
      };
      copy.setTitle = function() {
        return false;
      };
      return copy;
    };

    Component.prototype.log = function(output) {
      var name, state;
      if (output == null) {
        output = console;
      }
      name = (typeof this.getTitle === "function" ? this.getTitle() : void 0) || (typeof this.getName === "function" ? this.getName() : void 0) || "unnamed";
      state = this.getState() ? "on" : "off";
      return output.log(name + ": " + state);
    };

    return Component;

  })();

  BitHolder = (function(superClass) {
    extend(BitHolder, superClass);

    function BitHolder(name) {
      var state;
      if (name == null) {
        name = null;
      }
      BitHolder.__super__.constructor.call(this, name);
      state = false;
      this.setState = function(_state) {
        state = stateof(_state);
        return true;
      };
      this.getState = function() {
        return state;
      };
    }

    return BitHolder;

  })(Component);

  Pressable = (function(superClass) {
    extend(Pressable, superClass);

    function Pressable(name) {
      Pressable.__super__.constructor.call(this, name);
    }

    Pressable.prototype.press = function() {};

    Pressable.prototype.release = function() {};

    return Pressable;

  })(Component);

  Button = (function(superClass) {
    extend(Button, superClass);

    function Button(name, title) {
      var releaseDelay, state;
      if (name == null) {
        name = null;
      }
      this.title = title != null ? title : name;
      Button.__super__.constructor.call(this, name);
      state = false;
      releaseDelay = 0;
      this.press = function(steps) {
        if (steps == null) {
          steps = 0;
        }
        state = true;
        return releaseDelay = steps + 1;
      };
      this.release = function() {
        return state = false;
      };
      this.setTitle = function(_title) {
        this.title = _title;
        return this;
      };
      this.getTitle = function() {
        return this.title;
      };
      this.getState = function() {
        return state;
      };
      this.simulate = function() {
        if (releaseDelay > 0) {
          releaseDelay--;
          if (releaseDelay === 0) {
            return state = false;
          }
        }
      };
    }

    return Button;

  })(Pressable);

  Switch = (function(superClass) {
    extend(Switch, superClass);

    function Switch(name, title) {
      var pressed, releaseDelay, state;
      if (name == null) {
        name = null;
      }
      this.title = title != null ? title : name;
      Switch.__super__.constructor.call(this, name);
      state = false;
      pressed = false;
      releaseDelay = 0;
      this.press = function(steps) {
        if (steps == null) {
          steps = 0;
        }
        if (!pressed) {
          state = !state;
        }
        pressed = true;
        return releaseDelay = steps;
      };
      this.release = function() {
        return pressed = false;
      };
      this.setTitle = function(_title) {
        this.title = _title;
        return this;
      };
      this.getTitle = function() {
        return this.title;
      };
      this.getState = function() {
        return state;
      };
      this.simulate = function() {
        if (releaseDelay > 0) {
          releaseDelay--;
          if (releaseDelay === 0) {
            return pressed = false;
          }
        }
      };
    }

    return Switch;

  })(Pressable);

  LED = (function(superClass) {
    extend(LED, superClass);

    function LED(name, title) {
      var state;
      if (name == null) {
        name = null;
      }
      this.title = title != null ? title : name;
      LED.__super__.constructor.call(this, name);
      state = false;
      this.set = false;
      this.setTitle = function(_title) {
        return this.title = _title;
      };
      this.getTitle = function() {
        return this.title;
      };
      this.setState = function(_state) {
        state = stateof(_state);
        return true;
      };
      this.getState = function() {
        return state;
      };
      this.simulate = function() {
        if (stateof(this.set)) {
          return state = true;
        } else {
          return state = false;
        }
      };
    }

    return LED;

  })(BitHolder);

  Lamp = (function(superClass) {
    extend(Lamp, superClass);

    function Lamp(name, title) {
      var state;
      if (name == null) {
        name = null;
      }
      this.title = title != null ? title : name;
      Lamp.__super__.constructor.call(this, name);
      state = false;
      this.set = false;
      this.setTitle = function(_title) {
        return this.title = _title;
      };
      this.getTitle = function() {
        return this.title;
      };
      this.setState = function(_state) {
        state = stateof(_state);
        return true;
      };
      this.getState = function() {
        return state;
      };
      this.simulate = function() {
        if (stateof(this.set)) {
          return state = true;
        } else {
          return state = false;
        }
      };
    }

    Lamp.prototype.log = function(output) {
      var name, state;
      if (output == null) {
        output = console;
      }
      name = this.title || "unnamed";
      state = this.getState() ? "on" : "off";
      return output.log(name + ": " + state);
    };

    return Lamp;

  })(BitHolder);

  PulseCounter = (function(superClass) {
    var getbit, regenerate;

    extend(PulseCounter, superClass);

    getbit = function(number, bit) {
      return (number & (1 << bit)) >> bit;
    };

    regenerate = function(self, number) {
      self[0].setState(getbit(number, 0));
      self[1].setState(getbit(number, 1));
      self[2].setState(getbit(number, 2));
      return self[3].setState(getbit(number, 3));
    };

    function PulseCounter(name) {
      var number, updating;
      if (name == null) {
        name = null;
      }
      this.copy = bind(this.copy, this);
      PulseCounter.__super__.constructor.call(this, name);
      updating = false;
      number = 0;
      this[0] = new BitHolder(name + "[0]");
      this[1] = new BitHolder(name + "[1]");
      this[2] = new BitHolder(name + "[2]");
      this[3] = new BitHolder(name + "[3]");
      this.set = null;
      this.reset = null;
      this.enabled = true;
      this.simulate = (function(_this) {
        return function() {
          if (stateof(_this.enabled)) {
            if (stateof(_this.set)) {
              if (updating) {
                updating = false;
                regenerate(_this, ++number);
              }
            } else {
              if (!updating) {
                updating = true;
              }
            }
            if (stateof(_this.reset)) {
              regenerate(_this, number = 0);
              return updating = false;
            }
          }
        };
      })(this);
      this.log = function(console) {
        var bits, state;
        if (console == null) {
          console = console;
        }
        name = this.getName() || "unnamed";
        bits = (stateof(this[3]) ? '1' : '0') + (stateof(this[2]) ? '1' : '0') + (stateof(this[1]) ? '1' : '0') + (stateof(this[0]) ? '1' : '0');
        number = (stateof(this[0])) * 1 + (stateof(this[1])) * 2 + (stateof(this[2])) * 4 + (stateof(this[3])) * 8;
        state = number + " (" + bits + ")";
        return console.log(name + ": " + state);
      };
    }

    PulseCounter.prototype.copy = function(name) {
      var copy, i, n;
      copy = new PulseCounter(this.name);
      if (name != null) {
        copy.name = name;
      }
      copy.getName = function() {
        return this.name;
      };
      copy.setName = function() {
        return false;
      };
      for (n = i = 0; i <= 3; n = ++i) {
        copy[n] = this[n].copy(copy.name + '[' + name + ']');
      }
      return copy;
    };

    return PulseCounter;

  })(Component);

  PulseGenerator = (function(superClass) {
    extend(PulseGenerator, superClass);

    function PulseGenerator(name, onTime, offTime) {
      var state, time;
      if (name == null) {
        name = null;
      }
      if (onTime == null) {
        onTime = 1;
      }
      if (offTime == null) {
        offTime = 1;
      }
      PulseGenerator.__super__.constructor.call(this, name);
      state = false;
      time = 0;
      this.getState = function() {
        return state;
      };
      this.setState = function(_state) {
        state = _state;
        return true;
      };
      this.simulate = function() {
        if (time > 0) {
          time--;
          if (time === 0) {
            if (state) {
              time = offTime;
            } else {
              time = onTime;
            }
            return state = !state;
          }
        }
      };
    }

    return PulseGenerator;

  })(BitHolder);

  MemoryCell = (function(superClass) {
    extend(MemoryCell, superClass);

    function MemoryCell(name) {
      var state;
      if (name == null) {
        name = null;
      }
      MemoryCell.__super__.constructor.call(this, name);
      state = false;
      this.set = null;
      this.reset = null;
      this.setState = function(_state) {
        state = _state;
        return true;
      };
      this.getState = function() {
        return state;
      };
      this.simulate = function() {
        if (stateof(this.set)) {
          if (!stateof(this.reset)) {
            return state = true;
          }
        } else if (stateof(this.reset)) {
          return state = false;
        }
      };
    }

    return MemoryCell;

  })(BitHolder);

  MemoryCell_4bit = (function(superClass) {
    extend(MemoryCell_4bit, superClass);

    function MemoryCell_4bit(name) {
      if (name == null) {
        name = null;
      }
      MemoryCell_4bit.__super__.constructor.call(this, name);
      this[0] = new MemoryCell(name + "[0]");
      this[1] = new MemoryCell(name + "[1]");
      this[2] = new MemoryCell(name + "[2]");
      this[3] = new MemoryCell(name + "[3]");
    }

    MemoryCell_4bit.prototype.log = function(console) {
      var bits, name, number, state;
      if (console == null) {
        console = console;
      }
      name = this.getName() || "unnamed";
      bits = (stateof(this[3]) ? '1' : '0') + (stateof(this[2]) ? '1' : '0') + (stateof(this[1]) ? '1' : '0') + (stateof(this[0]) ? '1' : '0');
      number = (stateof(this[0])) * 1 + (stateof(this[1])) * 2 + (stateof(this[2])) * 4 + (stateof(this[3])) * 8;
      state = number + " (" + bits + ")";
      return console.log(name + ": " + state);
    };

    MemoryCell_4bit.prototype.copy = function(name) {
      var copy, i, n;
      copy = new MemoryCell_4bit(this.name);
      if (name != null) {
        copy.name = name;
      }
      copy.getName = function() {
        return this.name;
      };
      copy.setName = function() {
        return false;
      };
      for (n = i = 0; i <= 3; n = ++i) {
        copy[n] = this[n].copy(copy.name + '[' + name + ']');
      }
      return copy;
    };

    return MemoryCell_4bit;

  })(Component);

  generateLogicCircuit = function(name, getState) {
    var component;
    component = new Component(name);
    component.getState = function() {
      return stateof(getState());
    };
    return component;
  };

  stateof = function(component) {
    if (component instanceof Component) {
      return component.getState();
    } else if (typeof component === "number") {
      return component !== 0;
    } else if (typeof component === "boolean") {
      return component;
    } else {
      return false;
    }
  };

  watching = [];

  debugging = [];

  press = function(component, steps) {
    if (steps == null) {
      steps = 0;
    }
    return component.press(steps);
  };

  release = function(component) {
    return component.release();
  };

  watch = function(component, name) {
    if (name == null) {
      name = null;
    }
    return watching.push(component.copy(name));
  };

  unwatch = function(component) {
    var x;
    return watching = (function() {
      var i, len, results;
      results = [];
      for (i = 0, len = watching.length; i < len; i++) {
        x = watching[i];
        if (x !== component) {
          results.push(x);
        }
      }
      return results;
    })();
  };

  debug = function(component, name) {
    if (name == null) {
      name = null;
    }
    return debugging.push(component.copy(name));
  };

  undebug = function(component) {
    var x;
    return debugging = (function() {
      var i, len, results;
      results = [];
      for (i = 0, len = debugging.length; i < len; i++) {
        x = debugging[i];
        if (x !== component) {
          results.push(x);
        }
      }
      return results;
    })();
  };

  log = function() {
    var component, i, len;
    for (i = 0, len = watching.length; i < len; i++) {
      component = watching[i];
      component.log(console);
    }
  };

  simulate = function(steps) {
    var component, i, j, len, n, ref;
    if (steps == null) {
      steps = 1;
    }
    for (n = i = 1, ref = steps; 1 <= ref ? i <= ref : i >= ref; n = 1 <= ref ? ++i : --i) {
      for (j = 0, len = components.length; j < len; j++) {
        component = components[j];
        component.simulate();
        if (indexOf.call(debugging, component) >= 0) {
          component.log();
        }
      }
    }
  };

  Time = (function() {
    function Time() {}

    Time.MILISECOND = 1;

    Time.SECOND = 1000;

    Time.MINUTE = 60000;

    return Time;

  })();

  OR = function() {
    var args;
    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    return generateLogicCircuit("OR", function() {
      var _args, arg;
      _args = (function() {
        var i, len, results;
        results = [];
        for (i = 0, len = args.length; i < len; i++) {
          arg = args[i];
          results.push(stateof(arg));
        }
        return results;
      })();
      return indexOf.call(_args, true) >= 0;
    });
  };

  AND = function() {
    var args;
    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    return generateLogicCircuit("AND", function() {
      var _args, arg;
      _args = (function() {
        var i, len, results;
        results = [];
        for (i = 0, len = args.length; i < len; i++) {
          arg = args[i];
          results.push(stateof(arg));
        }
        return results;
      })();
      return !(indexOf.call(_args, false) >= 0);
    });
  };

  XOR = function() {
    var args;
    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    return generateLogicCircuit("XOR", function() {
      var _args, arg;
      _args = (function() {
        var i, len, results;
        results = [];
        for (i = 0, len = args.length; i < len; i++) {
          arg = args[i];
          results.push(stateof(arg));
        }
        return results;
      })();
      return ((function() {
        var i, len, results;
        results = [];
        for (i = 0, len = _args.length; i < len; i++) {
          arg = _args[i];
          if (arg === true) {
            results.push(arg);
          }
        }
        return results;
      })()).length === 1;
    });
  };

  NOT = function(arg) {
    return generateLogicCircuit("NOT", function() {
      return !stateof(arg);
    });
  };

  NAND = function() {
    var args;
    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    return generateLogicCircuit("NAND", function() {
      return NOT(AND.apply(null, args));
    });
  };

  NOR = function() {
    var args;
    args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
    return generateLogicCircuit("NOR", function() {
      return NOT(OR.apply(null, args));
    });
  };

  imports = {};

  run = function() {
    watching = [];
    debugging = [];
    return typeof main === "function" ? main(imports) : void 0;
  };

  start = function() {
    var component, i, len;
    if (typeof init === "function") {
      init();
    }
    for (i = 0, len = components.length; i < len; i++) {
      component = components[i];
      imports[component.name] = component;
    }
    if ((typeof window !== "undefined" && window !== null) && (typeof document !== "undefined" && document !== null)) {
      return addEventListener("DOMContentLoaded", function() {
        var buttons, buttonsDiv, fn, j, lamps, lampsDiv, leds, ledsDiv, len1, switches, switchesDiv, updateComponents, updateLamps, updateLeds, updateSwitches, updateWatchList, watchingDiv;
        buttonsDiv = document.createElement('div');
        switchesDiv = document.createElement('div');
        lampsDiv = document.createElement('div');
        ledsDiv = document.createElement('div');
        watchingDiv = document.createElement('div');
        watchingDiv.className = "watching";
        buttons = [];
        switches = [];
        lamps = [];
        leds = [];
        updateSwitches = function() {
          var _switch, active, div, j, len1, name, results;
          results = [];
          for (j = 0, len1 = switches.length; j < len1; j++) {
            _switch = switches[j];
            name = _switch[0], div = _switch[1];
            active = imports[name].getState();
            active = active ? "active" : "";
            results.push(div.className = "switch " + active);
          }
          return results;
        };
        updateLamps = function() {
          var active, div, j, lamp, len1, name, results;
          results = [];
          for (j = 0, len1 = lamps.length; j < len1; j++) {
            lamp = lamps[j];
            name = lamp[0], div = lamp[1];
            active = imports[name].getState();
            active = active ? "active" : "";
            results.push(div.className = "lamp " + active);
          }
          return results;
        };
        updateLeds = function() {
          var active, div, j, led, len1, name, results;
          results = [];
          for (j = 0, len1 = leds.length; j < len1; j++) {
            led = leds[j];
            name = led[0], div = led[1];
            active = imports[name].getState();
            active = active ? "active" : "";
            results.push(div.className = "led " + active);
          }
          return results;
        };
        updateWatchList = function() {
          var _console, div, j, len1, results, text;
          while (watchingDiv.firstChild) {
            watchingDiv.removeChild(watchingDiv.firstChild);
          }
          results = [];
          for (j = 0, len1 = watching.length; j < len1; j++) {
            component = watching[j];
            text = "";
            _console = {
              log: function() {
                var arg, args, k, len2, results1;
                args = 1 <= arguments.length ? slice.call(arguments, 0) : [];
                results1 = [];
                for (k = 0, len2 = args.length; k < len2; k++) {
                  arg = args[k];
                  results1.push(text += arg);
                }
                return results1;
              },
              debug: function() {},
              error: function() {},
              clear: function() {}
            };
            component.log(_console);
            div = document.createElement('div');
            div.appendChild(document.createTextNode(text));
            results.push(watchingDiv.appendChild(div));
          }
          return results;
        };
        updateComponents = function() {
          updateSwitches();
          updateLamps();
          updateLeds();
          return updateWatchList();
        };
        buttons.className = "buttons";
        lamps.className = "lamps";
        leds.className = "leds";
        fn = function(component) {
          var _switch, button, lamp, led;
          if (component instanceof Button) {
            button = document.createElement('button');
            button.className = "button";
            button.appendChild(document.createTextNode(component.title));
            button.addEventListener('click', (function(_this) {
              return function(e) {
                press(component, 1);
                simulate(10);
                return updateComponents();
              };
            })(this));
            buttons.push([component.name, button]);
            return buttonsDiv.appendChild(button);
          } else if (component instanceof Switch) {
            _switch = document.createElement('button');
            _switch.className = "switch";
            _switch.appendChild(document.createTextNode(component.title));
            _switch.addEventListener('click', (function(_this) {
              return function(e) {
                press(component, 1);
                simulate(10);
                return updateComponents();
              };
            })(this));
            switches.push([component.name, _switch]);
            return switchesDiv.appendChild(_switch);
          } else if (component instanceof Lamp) {
            lamp = document.createElement('div');
            lamp.className = "lamp";
            lamp.appendChild(document.createTextNode(component.title));
            lamps.push([component.name, lamp]);
            return lampsDiv.appendChild(lamp);
          } else if (component instanceof LED) {
            led = document.createElement('div');
            led.className = "led";
            led.appendChild(document.createTextNode(component.title));
            leds.push([component.name, led]);
            return ledsDiv.appendChild(led);
          }
        };
        for (j = 0, len1 = components.length; j < len1; j++) {
          component = components[j];
          fn(component);
        }
        run();
        updateComponents();
        start = document.createElement('button');
        start.className = "start";
        start.appendChild(document.createTextNode("Reset Simulation"));
        start.addEventListener("click", (function(_this) {
          return function(e) {
            run();
            return updateComponents();
          };
        })(this));
        document.body.appendChild(buttonsDiv);
        document.body.appendChild(switchesDiv);
        document.body.appendChild(lampsDiv);
        document.body.appendChild(ledsDiv);
        document.body.appendChild(watchingDiv);
        return document.body.appendChild(start);
      });
    } else if (typeof exports !== "undefined" && exports !== null) {
      return run();
    }
  };

  init = function() {
    var button_0, button_1, button_2, button_3, button_4, button_5, button_6, button_7, button_8, button_9, button_clear, button_reset, compare, correct, correct_0, correct_1, correct_2, correct_3, current, current_0, current_1, current_2, current_3, current_done, incorrect, inp_0, inp_1, inp_2, inp_3, input_0, input_1, input_2, input_3, input_any, ref_0, ref_1, ref_2, ref_3, switch_mode;
    button_0 = new Button("button_0", "0");
    button_1 = new Button("button_1", "1");
    button_2 = new Button("button_2", "2");
    button_3 = new Button("button_3", "3");
    button_4 = new Button("button_4", "4");
    button_5 = new Button("button_5", "5");
    button_6 = new Button("button_6", "6");
    button_7 = new Button("button_7", "7");
    button_8 = new Button("button_8", "8");
    button_9 = new Button("button_9", "9");
    button_reset = new Button("button_reset", "RESET");
    button_clear = new Button("button_clear", "CLEAR");
    switch_mode = new Switch("switch_mode", "MODE");
    input_0 = OR(button_1, button_3, button_5, button_7, button_9).setName("input_0");
    input_1 = OR(button_2, button_3, button_6, button_7).setName("input_1");
    input_2 = OR(button_4, button_5, button_6, button_7).setName("input_2");
    input_3 = OR(button_8, button_9).setName("input_3");
    input_any = OR(button_0, button_1, button_2, button_3, button_4, button_5, button_6, button_7, button_8, button_9).setName("input_any");
    current = new PulseCounter("current");
    current.set = AND(NOT(current[2]), NOT(input_any));
    current.reset = button_reset;
    current_0 = AND(NOT(current[0]), NOT(current[1]), NOT(current[2])).setName("current_0");
    current_1 = AND(current[0], NOT(current[1]), NOT(current[2])).setName("current_1");
    current_2 = AND(NOT(current[0]), current[1], NOT(current[2])).setName("current_2");
    current_3 = AND(current[0], current[1], NOT(current[2])).setName("current_3");
    current_done = AND(NOT(current[0]), NOT(current[1]), current[2]).setName("current_done");
    ref_0 = new MemoryCell_4bit("ref_0");
    ref_1 = new MemoryCell_4bit("ref_1");
    ref_2 = new MemoryCell_4bit("ref_2");
    ref_3 = new MemoryCell_4bit("ref_3");
    ref_0[0].set = AND(current_0, input_0, switch_mode);
    ref_0[1].set = AND(current_0, input_1, switch_mode);
    ref_0[2].set = AND(current_0, input_2, switch_mode);
    ref_0[3].set = AND(current_0, input_3, switch_mode);
    ref_1[0].set = AND(current_1, input_0, switch_mode);
    ref_1[1].set = AND(current_1, input_1, switch_mode);
    ref_1[2].set = AND(current_1, input_2, switch_mode);
    ref_1[3].set = AND(current_1, input_3, switch_mode);
    ref_2[0].set = AND(current_2, input_0, switch_mode);
    ref_2[1].set = AND(current_2, input_1, switch_mode);
    ref_2[2].set = AND(current_2, input_2, switch_mode);
    ref_2[3].set = AND(current_2, input_3, switch_mode);
    ref_3[0].set = AND(current_3, input_0, switch_mode);
    ref_3[1].set = AND(current_3, input_1, switch_mode);
    ref_3[2].set = AND(current_3, input_2, switch_mode);
    ref_3[3].set = AND(current_3, input_3, switch_mode);
    ref_0[0].reset = AND(button_reset, switch_mode);
    ref_0[1].reset = AND(button_reset, switch_mode);
    ref_0[2].reset = AND(button_reset, switch_mode);
    ref_0[3].reset = AND(button_reset, switch_mode);
    ref_1[0].reset = AND(button_reset, switch_mode);
    ref_1[1].reset = AND(button_reset, switch_mode);
    ref_1[2].reset = AND(button_reset, switch_mode);
    ref_1[3].reset = AND(button_reset, switch_mode);
    ref_2[0].reset = AND(button_reset, switch_mode);
    ref_2[1].reset = AND(button_reset, switch_mode);
    ref_2[2].reset = AND(button_reset, switch_mode);
    ref_2[3].reset = AND(button_reset, switch_mode);
    ref_3[0].reset = AND(button_reset, switch_mode);
    ref_3[1].reset = AND(button_reset, switch_mode);
    ref_3[2].reset = AND(button_reset, switch_mode);
    ref_3[3].reset = AND(button_reset, switch_mode);
    compare = function(a, b) {
      return NOT(XOR(a, b));
    };
    inp_0 = new MemoryCell_4bit("inp_0");
    inp_1 = new MemoryCell_4bit("inp_1");
    inp_2 = new MemoryCell_4bit("inp_2");
    inp_3 = new MemoryCell_4bit("inp_3");
    inp_0[0].set = AND(current_0, input_0, NOT(switch_mode));
    inp_0[1].set = AND(current_0, input_1, NOT(switch_mode));
    inp_0[2].set = AND(current_0, input_2, NOT(switch_mode));
    inp_0[3].set = AND(current_0, input_3, NOT(switch_mode));
    inp_1[0].set = AND(current_1, input_0, NOT(switch_mode));
    inp_1[1].set = AND(current_1, input_1, NOT(switch_mode));
    inp_1[2].set = AND(current_1, input_2, NOT(switch_mode));
    inp_1[3].set = AND(current_1, input_3, NOT(switch_mode));
    inp_2[0].set = AND(current_2, input_0, NOT(switch_mode));
    inp_2[1].set = AND(current_2, input_1, NOT(switch_mode));
    inp_2[2].set = AND(current_2, input_2, NOT(switch_mode));
    inp_2[3].set = AND(current_2, input_3, NOT(switch_mode));
    inp_3[0].set = AND(current_3, input_0, NOT(switch_mode));
    inp_3[1].set = AND(current_3, input_1, NOT(switch_mode));
    inp_3[2].set = AND(current_3, input_2, NOT(switch_mode));
    inp_3[3].set = AND(current_3, input_3, NOT(switch_mode));
    inp_0[0].reset = AND(button_reset, NOT(switch_mode));
    inp_0[1].reset = AND(button_reset, NOT(switch_mode));
    inp_0[2].reset = AND(button_reset, NOT(switch_mode));
    inp_0[3].reset = AND(button_reset, NOT(switch_mode));
    inp_1[0].reset = AND(button_reset, NOT(switch_mode));
    inp_1[1].reset = AND(button_reset, NOT(switch_mode));
    inp_1[2].reset = AND(button_reset, NOT(switch_mode));
    inp_1[3].reset = AND(button_reset, NOT(switch_mode));
    inp_2[0].reset = AND(button_reset, NOT(switch_mode));
    inp_2[1].reset = AND(button_reset, NOT(switch_mode));
    inp_2[2].reset = AND(button_reset, NOT(switch_mode));
    inp_2[3].reset = AND(button_reset, NOT(switch_mode));
    inp_3[0].reset = AND(button_reset, NOT(switch_mode));
    inp_3[1].reset = AND(button_reset, NOT(switch_mode));
    inp_3[2].reset = AND(button_reset, NOT(switch_mode));
    inp_3[3].reset = AND(button_reset, NOT(switch_mode));
    correct_0 = AND(compare(inp_0[0], ref_0[0]), compare(inp_0[1], ref_0[1]), compare(inp_0[2], ref_0[2]), compare(inp_0[3], ref_0[3])).setName("correct_0");
    correct_1 = AND(compare(inp_1[0], ref_1[0]), compare(inp_1[1], ref_1[1]), compare(inp_1[2], ref_1[2]), compare(inp_1[3], ref_1[3])).setName("correct_1");
    correct_2 = AND(compare(inp_2[0], ref_2[0]), compare(inp_2[1], ref_2[1]), compare(inp_2[2], ref_2[2]), compare(inp_2[3], ref_2[3])).setName("correct_2");
    correct_3 = AND(compare(inp_3[0], ref_3[0]), compare(inp_3[1], ref_3[1]), compare(inp_3[2], ref_3[2]), compare(inp_3[3], ref_3[3])).setName("correct_3");
    correct = new LED("correct", "CORRECT");
    correct.set = AND(correct_0, correct_1, correct_2, correct_3, current_done);
    incorrect = new LED("incorrect", "INCORRECT");
    return incorrect.set = AND(NAND(correct_0, correct_1, correct_2, correct_3), current_done);
  };

  main = function(imports) {
    var button_0, button_1, button_2, button_3, button_4, button_5, button_6, button_7, button_8, button_9, button_clear, button_reset, correct, correct_0, correct_1, correct_2, correct_3, current, current_0, current_1, current_2, current_3, incorrect, inp_0, inp_1, inp_2, inp_3, input_0, input_1, input_2, input_3, input_any, ref_0, ref_1, ref_2, ref_3, switch_mode;
    button_0 = imports.button_0, button_1 = imports.button_1, button_2 = imports.button_2, button_3 = imports.button_3, button_4 = imports.button_4, button_5 = imports.button_5, button_6 = imports.button_6, button_7 = imports.button_7, button_8 = imports.button_8, button_9 = imports.button_9, button_reset = imports.button_reset, button_clear = imports.button_clear, switch_mode = imports.switch_mode, input_0 = imports.input_0, input_1 = imports.input_1, input_2 = imports.input_2, input_3 = imports.input_3, input_any = imports.input_any, current = imports.current, current_0 = imports.current_0, current_1 = imports.current_1, current_2 = imports.current_2, current_3 = imports.current_3, ref_0 = imports.ref_0, ref_1 = imports.ref_1, ref_2 = imports.ref_2, ref_3 = imports.ref_3, inp_0 = imports.inp_0, inp_1 = imports.inp_1, inp_2 = imports.inp_2, inp_3 = imports.inp_3, correct_0 = imports.correct_0, correct_1 = imports.correct_1, correct_2 = imports.correct_2, correct_3 = imports.correct_3, correct = imports.correct, incorrect = imports.incorrect;
    press(switch_mode, 1);
    simulate(10);
    press(button_1, 1);
    simulate(10);
    press(button_2, 1);
    simulate(10);
    press(button_3, 1);
    simulate(10);
    press(button_4, 1);
    simulate(10);
    press(switch_mode, 1);
    simulate(10);
    press(button_reset, 1);
    simulate(10);
    press(button_1, 1);
    simulate(10);
    press(button_2, 1);
    simulate(10);
    press(button_3, 1);
    simulate(10);
    press(button_4, 1);
    simulate(10);
    watch(current, "Huidige getal");
    watch(inp_0, "Input Getal 1");
    watch(inp_1, "Input Getal 2");
    watch(inp_2, "Input Getal 3");
    watch(inp_3, "Input Getal 4");
    watch(ref_0, "Referentie Getal 1");
    watch(ref_1, "Referentie Getal 2");
    watch(ref_2, "Referentie Getal 3");
    watch(ref_3, "Referentie Getal 4");
    watch(correct);
    watch(incorrect);
    return log();
  };

  start();

}).call(this);

    </script>
  </body>
</html>